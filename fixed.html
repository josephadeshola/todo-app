<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
    <script>
         const allUser = JSON.parse(localStorage.getItem
            ("localAlluser"));
        const currentUserIndex = localStorage.getItem
            ("currentUserIndex");


        //    disp.innerHTML="welcome"+allUser[ currentUserIndex].firstname
        function addTodo() {
            const alltittle = {
                todotittle: tittle.value,
                todocategory: category.value,
                todotime: time.value,
            }
            allUser[currentUserIndex].alldetails.push(alltittle)
            localStorage.setItem("localAlluser", JSON.stringify(allUser))
            console.log(allUser)
            displayUser()

        }
        function displayUser() {
            myTable.innerHTML = ''
            myTable.innerHTML = `
            <tr class="col-lg-12  bg-dark ">
             <th  class="text-light shor">S/N</th>
             <th  class="text-light shor">Todo Tittle</th>
             <th  class="text-light shor">Todo Category</th>
             <th  class="text-light shor">Todo Time</th>
             <th  class="text-light shor">Action</th>   
            </tr>
            `
            disp.innerHTML = ""
            currentUserTodo = allUser[currentUserIndex].alldetails
            for (let index = 0; index < currentUserTodo.length; index++) {
                console.log(currentUserTodo[index].alldetails)
                myTable.innerHTML += `
               <tr>
             <td class="mb-3">${index + 1}</td>
             <td class="mb-5 "> ${currentUserTodo[index].todotittle}</td>
             <td class="mb-5 "> ${currentUserTodo[index].todocategory}</td>
             <td class="mb-5 "> ${currentUserTodo[index].todotime}
                <td id="desig" >
                <button  class=" btn btn-danger"  onclick="deleteTodo(${index})">Delete todo</button>
                <button  class="btn btn-warning " onclick="editTodo(${index})">Edit Todo</button>
                </td>

              </tr>
              `
            }
            }
           function deleteTodo(del) {
            allUser.splice(del, 1)
            localStorage.setItem('localAlluser',JSON.stringify(allUser))
            displayUser()
        }
           function editTodo(edit){
            const allTittle={
                todotittle:firstodo.value,
                todocategory:secondtodo.value,
                todotime:thirdtodo.value

            }
            allUser.splice(edit,1,allTittle)
            displayUser()
      }

      if (localStorage.localAlluser) {
        const allUsers = JSON.parse(localStorage.getItem
            ("localAlluser"));
           let allUser = allUsers[currentUserIndex].alldetails
            for (let index = 0; index < allUser.length; index++) {
                console.log(allUser[index].alldetails)
                myTable.innerHTML += `
               <tr>
             <td class="mb-3">${index + 1}</td>
             <td class="mb-5 "> ${allUser[index].todotittle}</td>
             <td class="mb-5 "> ${allUser[index].todocategory}</td>
             <td class="mb-5 "> ${allUser[index].todotime}
                <td id="desig" >
                <button  class=" btn btn-danger"  onclick="deleteTodo(${index})">Delete todo</button>
                <button  class="btn btn-warning " onclick="editTodo(${index})">Edit Todo</button>
                </td>

              </tr>
              `
            }
}




    </script>
</body>
</html>